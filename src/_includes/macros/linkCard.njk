{% macro linkCard(link) %}
  {# {{ link | log }} #}
  {% set thumbUrl = 'https://image.thum.io/get/width/1200/crop/800/noanimate/' %}

  {% set illustration = {
    src: thumbUrl + link.data.link,
    alt: "screenshot of " + link.data.title,
    width: 1200,
    height: 800,
    classes: "vignette"
  } %}

  {% set surtitle = false %}
  {% if link.data.authors %}
    {% set surtitle %}
    {%- for author in link.data.authors -%}
      {%- if not loop.first -%}
        {%- if not loop.last -%}, {% else %} and {% endif -%}
      {%- endif -%}
      {%- if author.twitter -%}
        <img class="u-photo smallavatar" src="https://res.cloudinary.com/nho/image/twitter_name/{{ author.twitter }}" alt="{{ author.name }} avatar" width="24" height="24" />
      {%- endif %}
      {{ author.name }}
    {%- endfor %}
    wrote
    {% endset %}
  {% endif %}

  {% set content %}
  <p class="card__text p-summary">{{ link.templateContent | excerpt | safe }}</p>
  {% endset %}

  {% from "macros/meta.njk" import meta %}
  {% set meta %}
  {{ meta(link) }}
  {% endset %}

  {% from "macros/card.njk" import card %}
  {{ card('link', link.data.lang, surtitle, link.data.title, link.url, illustration, content, meta) }}
{% endmacro %}
